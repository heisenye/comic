import{_ as p,g as y,d as f,e as u,f as h,h as g,i as x,B as w,r as b,o as a,c as i,F as d,j as k,b as v,a as m,t as C,k as S}from"./index-467cb7cb.js";const V={name:"HistoryView",methods:{goBook:y},components:{TheImage:f},setup(){const c=u(),r=h(null),l=e=>{const t=new Set(JSON.parse(localStorage.getItem("history")));t.delete(e);const o=r.value.find(n=>n._id===e);o&&(o.isVisible=!1),localStorage.setItem("history",JSON.stringify(Array.from(t)))};return g(async()=>{try{const e=await x(c);if(e.code===200){const t=e.data;if(typeof t=="object"&&!Array.isArray(t)){t.isVisible=!0,r.value=[t];return}t.forEach(o=>o.isVisible=!0),r.value=t}}catch(e){console.error(e)}}),{BASE_URL:w,historyComics:r,removeHistory:l}}},B={class:"absolute top-44 w-full max-w-4xl min-w-[300px] left-1/2 -translate-x-1/2 px-1 space-y-4 text-white"},I={key:0,class:"w-1/2 md:w-1/3 lg:w-1/4 card inline-flex px-3 indicator"},H=["onClick"],$={class:"card-body text-center bg-primary rounded-b-2xl font-cn_2 py-6 px-0 whitespace-nowrap"};function A(c,r,l,e,t,o){const n=b("TheImage");return a(),i("main",B,[(a(!0),i(d,null,k(e.historyComics,s=>(a(),i(d,{key:s._id},[s.isVisible?(a(),i("div",I,[v(n,{class:"cursor-pointer",src:`${e.BASE_URL}/${s._id}/${s.coverImage.chapter}/${s.coverImage.page}.webp`,alt:s.name,onClick:_=>o.goBook(s._id)},null,8,["src","alt","onClick"]),m("i",{class:"indicator-item fa-solid fa-circle-xmark absolute right-2",onClick:_=>e.removeHistory(s._id)},null,8,H),m("div",$,C(s.name),1)])):S("",!0)],64))),128))])}const E=p(V,[["render",A]]);export{E as default};
