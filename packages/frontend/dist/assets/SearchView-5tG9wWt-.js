import{_ as g,n as k,T as b,R as v,p as T,e as h,q as C,L as B,f as S,a8 as N,U as V,c as u,b as o,x as r,j as x,l as q,a9 as F,r as n,o as d,a as l,y as z,z as D,aa as I,W as R}from"./index-PvhjrqIM.js";import{T as K}from"./TheComics-E3OwEH5C.js";const M={name:"SearchView",components:{TheButton:k,TheIcon:b,TheComics:K,TheNavigation:v},setup(){const s=T(),t=s.query.keyword?h(s.query.keyword):h(""),m=C(()=>!t.value.trim()),e=h([]);return B(()=>s.query.keyword,c=>{t.value=String(c)}),S(async()=>{if(t.value.trim()){const c=await N(t.value);e.value=c.data}}),{goBack:V,keyword:t,isSearchDisabled:m,searchComics:e,searchFn:()=>{t.value.trim()&&F(t.value)}}}},U=l("span",{class:"text-2xl"},"<",-1),j=[U],E={class:"relative flex-grow flex items-center pr-2 font-Noto"},L={key:0,class:"absolute top-44 text-xl text-center w-full text-white font-black font-base"};function W(s,t,m,e,w,c){const i=n("TheIcon"),f=n("TheButton"),p=n("router-link"),_=n("TheNavigation"),y=n("TheComics");return d(),u("main",null,[o(_,null,{left:r(()=>[l("button",{class:"text-white btn btn-sm btn-ghost tracking-wider font-medium text-lg px-4",onClick:t[0]||(t[0]=(...a)=>e.goBack&&e.goBack(...a))},j)]),right:r(()=>[l("div",E,[z(l("input",{type:"text",placeholder:"搜索标题或标签",class:"nav-input","onUpdate:modelValue":t[1]||(t[1]=a=>e.keyword=a),onKeyup:t[2]||(t[2]=I((...a)=>e.searchFn&&e.searchFn(...a),["enter"]))},null,544),[[D,e.keyword]]),o(i,{type:"magnifying-glass",class:"absolute left-4"}),o(f,{shape:"circle",type:"error",disabled:e.isSearchDisabled,class:"absolute right-4 size-6 shadow-md"},{default:r(()=>[o(i,{size:"sm",type:"arrow-right",class:R(["text-base",{"text-white":!e.isSearchDisabled}]),onClick:e.searchFn},null,8,["class","onClick"])]),_:1},8,["disabled"])]),o(p,{to:{name:"home"},class:"relative btn btn-info btn-circle shadow-neutral shadow-md text-white"},{default:r(()=>[o(i,{type:"house",class:"lg:text-lg xl:text-xl 2xl:text-2xl"})]),_:1})]),_:1}),e.searchComics.length===0&&s.$route.query.keyword?(d(),u("h1",L," 什么也没有找见 ")):x("",!0),e.searchComics?(d(),q(y,{key:1,class:"top-20","comic-list":e.searchComics},null,8,["comic-list"])):x("",!0)])}const H=g(M,[["render",W]]);export{H as default};
