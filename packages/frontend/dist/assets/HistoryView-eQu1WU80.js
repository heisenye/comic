import{_ as p,g as y,d as f,e as u,f as h,h as g,i as x,B as w,r as v,c as a,F as d,j as b,o as i,b as k,a as m,t as C,k as S}from"./index-Z0csONL9.js";const V={name:"HistoryView",methods:{goBook:y},components:{TheImage:f},setup(){const c=u(),r=h(null),l=e=>{const t=new Set(JSON.parse(localStorage.getItem("history")));t.delete(e);const o=r.value.find(n=>n._id===e);o&&(o.isVisible=!1),localStorage.setItem("history",JSON.stringify(Array.from(t)))};return g(async()=>{try{const e=await x(c);if(e.code===200){const t=e.data;if(typeof t=="object"&&!Array.isArray(t)){t.isVisible=!0,r.value=[t];return}t.forEach(o=>o.isVisible=!0),r.value=t}}catch(e){console.error(e)}}),{BASE_URL:w,historyComics:r,removeHistory:l}}},B={class:"relative top-40 mx-auto w-full max-w-4xl min-w-[300px] px-1 space-y-4 text-white"},I={key:0,class:"w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 card inline-flex px-4 indicator"},H=["onClick"],$={class:"card-body text-center bg-primary rounded-b-2xl font-base_2 py-6 px-0 whitespace-nowrap"};function A(c,r,l,e,t,o){const n=v("TheImage");return i(),a("main",B,[(i(!0),a(d,null,b(e.historyComics,s=>(i(),a(d,{key:s._id},[s.isVisible?(i(),a("div",I,[k(n,{class:"cursor-pointer",src:`${e.BASE_URL}/${s._id}/${s.coverImage.chapter}/${s.coverImage.page}.webp`,alt:s.name,onClick:_=>o.goBook(s._id)},null,8,["src","alt","onClick"]),m("i",{class:"indicator-item fa-solid fa-circle-xmark absolute right-2",onClick:_=>e.removeHistory(s._id)},null,8,H),m("div",$,C(s.name),1)])):S("",!0)],64))),128))])}const E=p(V,[["render",A]]);export{E as default};
